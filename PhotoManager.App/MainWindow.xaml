<Window x:Class="PhotoManager.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:PhotoManager.App.Converters"
        Title="Photo Manager"
        Height="600" Width="900">

  <Window.Resources>
    <conv:BoolToStarColorConverter x:Key="BoolToStarColorConverter"/>
  </Window.Resources>
  
  <!-- Main grid with 2 columns -->
  <Grid>
    <Grid.ColumnDefinitions>
      <!-- Left sidebar -->
      <ColumnDefinition Width="200"/>
      <!-- Right main content -->
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- Left Sidebar -->
    <ListBox Grid.Column="0"
         ItemsSource="{Binding MenuItems}"
         SelectedItem="{Binding SelectedMenu, Mode=TwoWay}"
         Background="#FF2D2D30"
         BorderThickness="0"
         Foreground="White"
         FontSize="16"
         FontWeight="Bold">
      <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
          <Setter Property="Padding" Value="10"/>
          <Setter Property="Margin" Value="5"/>
          <Setter Property="HorizontalContentAlignment" Value="Left"/>
          <Setter Property="Background" Value="Transparent"/>
          <Setter Property="Foreground" Value="White"/>
          <Setter Property="Cursor" Value="Hand"/>
          <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
              <Setter Property="Background" Value="#FF007ACC"/>
            </Trigger>
          </Style.Triggers>
        </Style>
      </ListBox.ItemContainerStyle>
    </ListBox>

    <!-- Right Main Content -->
    <Grid Grid.Column="1" Margin="10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <!-- Folder selection -->
        <RowDefinition Height="*"/>
        <!-- Photo gallery -->
        <RowDefinition Height="Auto"/>
        <!-- Status bar -->
      </Grid.RowDefinitions>

      <!-- Folder selection row -->
      <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,5" VerticalAlignment="Center">
        <Button Content="Browse Photos" Command="{Binding LoadPhotosCommand}" Margin="0,0,10,0"/>
        <Button Content="Delete Selected" Command="{Binding DeletePhotosCommand}" Margin="0,0,10,0"/>
        <TextBlock Text="{Binding SelectedDirectory}" VerticalAlignment="Center"
                   TextTrimming="CharacterEllipsis" Width="400"/>
      </StackPanel>

      <!-- Photo gallery row -->
      <ScrollViewer Grid.Row="1">
        <ItemsControl ItemsSource="{Binding PhotosView}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <WrapPanel IsItemsHost="True"/>
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Border Margin="5"
                      Background="#F0F0F0"   
                        CornerRadius="8"
                        BorderBrush="LightGray"
                        BorderThickness="1"
                        Padding="5">
                <!-- Overlay layout for photo + checkbox -->
                <Grid Margin="5" Width="150" Height="180">
                <Grid.RowDefinitions>
                  <RowDefinition Height="*"/>
                  <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Border BorderBrush="Gray" BorderThickness="1" Grid.Row="0">
                  <Image Source="{Binding Thumbnail}"
                         Stretch="UniformToFill"/>
                </Border>

                <!-- Checkbox overlay -->
                <CheckBox IsChecked="{Binding IsSelected}"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          Margin="3"
                          Background="White"
                          Opacity="0.8"
                          ToolTip="Select photo"/>
                  
                <!-- Favorite toggle (top-right corner) -->
                  <ToggleButton IsChecked="{Binding IsFavorite, Mode=TwoWay}"
                          Content="★"
                          Width="24" Height="24"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Top"
                          Margin="3"
                          Background="Transparent"
                          BorderThickness="0"
                          ToolTip="Mark as Favorite"
                          FontSize="14"
                          Foreground="{Binding IsFavorite, Converter={StaticResource BoolToStarColorConverter}}"/>

                <!-- File details panel -->
                <StackPanel Grid.Row="1" Margin="3">
                  <TextBlock Text="{Binding FileName}"
                             FontSize="12"
                             FontWeight="Bold"
                             TextTrimming="CharacterEllipsis"/>
                  <TextBlock Text="{Binding FileSize}" FontSize="11"/>
                  <TextBlock Text="{Binding Dimensions}" FontSize="11"/>
                </StackPanel>
              </Grid>
              </Border>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>

      <!-- Status bar row -->
      <StatusBar Grid.Row="2" VerticalAlignment="Bottom">
        <StatusBarItem>
          <TextBlock Text="{Binding StatusMessage}" />
        </StatusBarItem>
      </StatusBar>
    </Grid>
  </Grid>
</Window>
